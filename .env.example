# MemoroseDB Environment Configuration Template
# Copy this file to .env and fill in your actual values.

# ------------------------------------------------------------------------------
# LLM Provider Configuration
# ------------------------------------------------------------------------------

# LLM Provider: "gemini" (default) or "openai"
LLM_PROVIDER=gemini

# Google Gemini Configuration
# Get your key at: https://aistudio.google.com/app/apikey
GOOGLE_API_KEY=your_google_api_key_here

# OpenAI Configuration (Optional, if LLM_PROVIDER=openai)
# OPENAI_API_KEY=your_openai_api_key_here

# ------------------------------------------------------------------------------
# Model Selection
# ------------------------------------------------------------------------------

# LLM Model (Used for semantic compression and insight synthesis)
# For Gemini: gemini-2.0-flash, gemini-2.5-flash, gemini-2.5-pro
# For OpenAI: gpt-4o, gpt-4o-mini
LLM_MODEL=gemini-2.0-flash

# Embedding Model (Used for vector search)
# For Gemini: text-embedding-004
# For OpenAI: text-embedding-3-small, text-embedding-3-large
EMBEDDING_MODEL=text-embedding-004

# ------------------------------------------------------------------------------
# Server & Network Settings
# ------------------------------------------------------------------------------

# Logging level: error, warn, info, debug, trace
RUST_LOG=info

# Gateway: Number of storage shards to route between
SHARD_COUNT=2

# Gateway: Prefix for node URLs (e.g. http://localhost- for http://localhost-0, http://localhost-1)
NODE_PREFIX=http://127.0.0.1-

# ------------------------------------------------------------------------------
# Worker Tuning (L0 -> L1 / L2)
# ------------------------------------------------------------------------------
# Use MEMOROSE__* format to map nested config keys.

# L0 -> L1 consolidation
MEMOROSE_WORKER__CONSOLIDATION_INTERVAL_MS=1000
MEMOROSE_WORKER__CONSOLIDATION_BATCH_SIZE=200
MEMOROSE_WORKER__CONSOLIDATION_MAX_RETRIES=3
MEMOROSE_WORKER__LLM_CONCURRENCY=5

# Decay & prune
MEMOROSE_WORKER__DECAY_INTERVAL_SECS=60
MEMOROSE_WORKER__DECAY_FACTOR=0.9
MEMOROSE_WORKER__PRUNE_THRESHOLD=0.1

# Compaction
MEMOROSE_WORKER__COMPACTION_INTERVAL_SECS=3600

# L2 community generation
MEMOROSE_WORKER__COMMUNITY_INTERVAL_MS=1000
MEMOROSE_WORKER__COMMUNITY_MIN_MEMBERS=3
MEMOROSE_WORKER__COMMUNITY_MAX_USERS_PER_CYCLE=100000
MEMOROSE_WORKER__COMMUNITY_MAX_GROUPS_PER_USER=100000
MEMOROSE_WORKER__COMMUNITY_TRIGGER_L1_STEP=5

# Auto-linking similarity threshold (0.0-1.0, default: 0.6)
# Lower values = more connections, higher L2 generation
MEMOROSE_WORKER__AUTO_LINK_SIMILARITY_THRESHOLD=0.6

# Reflection
MEMOROSE_WORKER__INSIGHT_INTERVAL_MS=30000
MEMOROSE_WORKER__INSIGHT_RECENT_L1_LIMIT=20
